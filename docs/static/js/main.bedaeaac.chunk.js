(this["webpackJsonpyaml-wallet"]=this["webpackJsonpyaml-wallet"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(14),s=n.n(r),i=(n(19),n(2)),o=n(5),u=(n(20),n(3)),l=n.n(u),d=n(4),b=n(13),j={address:function(e){return"https://blockstream.info/api/address/".concat(e)},txs:function(e){return"https://blockstream.info/api/address/".concat(e,"/txs")}},f={avgPrice:function(e){return"https://api.binance.com/api/v3/avgPrice?symbol=".concat(e)}},x={wallets:{retrieve:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a={},Object.keys(t).forEach((function(e){t[e].forEach((function(e){n.push(Object(d.a)(l.a.mark((function t(){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(j.address(e));case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,a[e]=c.chain_stats.funded_txo_sum-c.chain_stats.spent_txo_sum;case 7:case"end":return t.stop()}}),t)})))())}))})),e.next=5,Promise.all(n);case 5:return c=Object.keys(t).map((function(e){return{title:e,addresses:t[e].map((function(e){return{address:e,value:a[e]}}))}})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTxs:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,c,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=[],c={},r={},s=0,t.forEach((function(e){r[e]=!0})),t.forEach((function(e){n.push(Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(j.txs(e));case 2:return n=t.sent,t.next=5,n.json();case 5:t.sent.forEach((function(e){if(e.txid){for(var t=0,n=0;n<e.vout.length;n+=1)r[e.vout[n].scriptpubkey_address]&&(t+=e.vout[n].value);for(var s=0;s<e.vin.length;s+=1)r[e.vin[s].prevout.scriptpubkey_address]&&(t-=e.vin[s].prevout.value);c[e.txid]||(c[e.txid]=!0,a.push({txid:e.txid,blockTime:e.status.block_time,value:t,balance:0}))}}));case 7:case"end":return t.stop()}}),t)})))())})),e.next=9,Promise.all(n);case 9:return e.abrupt("return",a.sort((function(e,t){return e.blockTime-t.blockTime})).map((function(e){return s+=e.value,Object(b.a)(Object(b.a)({},e),{},{balance:s})})).reverse());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},btcPrice:{get:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(f.avgPrice("BTCUSDT"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,localStorage.setItem("btcPrice",n.price),e.abrupt("return",n.price);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}},h=n(12),p=n.n(h),O=function(e){var t="\xe0\xe1\xe2\xe4\xe6\xe3\xe5\u0101\u0103\u0105\xe7\u0107\u010d\u0111\u010f\xe8\xe9\xea\xeb\u0113\u0117\u0119\u011b\u011f\u01f5\u1e27\xee\xef\xed\u012b\u012f\xec\u0142\u1e3f\xf1\u0144\u01f9\u0148\xf4\xf6\xf2\xf3\u0153\xf8\u014d\xf5\u0151\u1e55\u0155\u0159\xdf\u015b\u0161\u015f\u0219\u0165\u021b\xfb\xfc\xf9\xfa\u016b\u01d8\u016f\u0171\u0173\u1e83\u1e8d\xff\xfd\u017e\u017a\u017c\xb7/_,:;",n=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(n,(function(e){return"aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(t.indexOf(e))})).replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},v=function(e){return e/1e8+" BTC"},m=function(e){return function(t){return(t/1e8*e).toLocaleString()+" USD"}},_=n(6),w=n.n(_),g=n(0),k=function(e){var t=e.slug,n=Object(a.useContext)(A),c=n.wallets,r=n.btcPrice,s=Object(a.useState)([]),u=Object(i.a)(s,2),b=u[0],j=u[1],f=Object(a.useState)(0),h=Object(i.a)(f,2),_=h[0],k=h[1],P=Object(o.c)()[1];Object(a.useEffect)((function(){var e=c.find((function(e){var n=e.title;return O(n)===t}));e?(Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.wallets.getTxs(e.addresses.map((function(e){return e.address})));case 2:n=t.sent,j(n);case 4:case"end":return t.stop()}}),t)})))(),k(e.addresses.reduce((function(e,t){return e+t.value}),0))):P("/")}),[t,c,P]);var y=m(r);return Object(g.jsxs)("div",{className:w.a.container,children:[Object(g.jsxs)("div",{className:w.a.header,children:[Object(g.jsx)(o.a,{href:"/",children:Object(g.jsx)("h1",{children:"wallet.md"})}),Object(g.jsx)("h2",{children:"Wallet balance"}),Object(g.jsx)("span",{children:v(_)}),Object(g.jsx)("small",{className:w.a.usdAmount,children:y(_)}),Object(g.jsx)(o.a,{href:"/",className:w.a.close,children:"+"})]}),Object(g.jsxs)("div",{className:w.a.transactions,children:[Object(g.jsx)("h2",{children:"Activity"}),Object(g.jsx)("ul",{children:b.map((function(e){var t=e.blockTime,n=e.txid,a=e.value,c=e.balance;return Object(g.jsxs)("li",{children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{className:a>0?w.a.boxGreen:w.a.boxRed,children:a>0?"received":"sent"}),Object(g.jsx)("br",{}),Object(g.jsx)("small",{title:p()(1e3*t).calendar(),children:p()(1e3*t).calendar()})]}),Object(g.jsx)("div",{children:v(a)}),Object(g.jsx)("div",{children:v(c)})]},n)}))})]})]})},P=n(9),y=n.n(P),S=function(){var e=Object(a.useContext)(A),t=e.data,n=e.setData,c=Object(a.useState)(t),r=Object(i.a)(c,2),s=r[0],o=r[1],u=Object(a.useState)(window.innerWidth>750),l=Object(i.a)(u,2),d=l[0],b=l[1];return!d&&window.innerWidth<750?Object(g.jsx)("div",{className:y.a.container,children:Object(g.jsx)("button",{onClick:function(){return b(!0)},className:y.a["expand-btn"],children:"Edit"})}):Object(g.jsxs)("div",{className:y.a.container,children:[Object(g.jsx)("textarea",{className:y.a.editor,value:s,onChange:function(e){var t=e.target.value;o(t)},spellCheck:"false"}),Object(g.jsx)("button",{onClick:function(){localStorage.setItem("yamlFile",s),n(s),b(!1)},className:y.a["save-btn"],children:"Save"})]})},E=n(7),N=n.n(E),C=function(e){var t=e.loading,n=Object(a.useContext)(A),c=n.wallets,r=n.btcPrice,s=Object(a.useState)(0),u=Object(i.a)(s,2),l=u[0],d=u[1],b=Object(a.useState)({}),j=Object(i.a)(b,2),f=j[0],x=j[1];Object(a.useEffect)((function(){var e=0,t={};c.forEach((function(n){var a=n.title,c=n.addresses.reduce((function(e,t){return e+t.value}),0);t[a]=c,e+=c})),d(e),x(t)}),[c]);var h=m(r);return Object(g.jsxs)("div",{className:N.a.container,children:[Object(g.jsxs)("div",{className:N.a.header,children:[Object(g.jsx)("h1",{children:"wallet.md"}),Object(g.jsx)("h2",{children:"Total balance"}),Object(g.jsx)("span",{children:h(l)}),t&&Object(g.jsx)("i",{className:N.a.spinner})]}),Object(g.jsxs)("div",{className:N.a.wallets,children:[Object(g.jsx)("h2",{children:"Wallets"}),Object(g.jsx)("div",{className:N.a["box-container"],children:c.map((function(e){var t=e.title;return Object(g.jsx)(o.a,{href:"/".concat(O(t)),children:Object(g.jsxs)("div",{className:N.a.box,children:[Object(g.jsx)("h3",{children:t}),Object(g.jsx)("span",{children:v(f[t])}),Object(g.jsxs)("small",{children:["\u2248 ",h(f[t])]})]})},t)}))})]})]})},D=function(e){var t=e.params.slug,n=Object(a.useContext)(A),c=n.data,r=n.setWallets,s=n.setPrice,o=Object(a.useState)(!1),u=Object(i.a)(o,2),b=u[0],j=u[1];return Object(a.useEffect)((function(){if(!t){var e=function(e){var t=e.split("\n"),n=/^#\s+/,a=/^[13][a-km-zA-HJ-NP-Z1-9]{25,34}$/,c=/^\s*$/,r={},s=[];return t.forEach((function(e){e.match(n)?(s=[],r[e.replace(n,"")]=s):e.match(a)?s.push(e):e.match(c)||console.warn("malformed line: ".concat(e))})),r}(c);j(!0),Object(d.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.wallets.retrieve(e);case 2:return n=t.sent,t.next=5,x.btcPrice.get();case 5:a=t.sent,s(a),r(n),j(!1);case 9:case"end":return t.stop()}}),t)})))()}}),[c,t,r,s]),Object(g.jsxs)("div",{id:"Wallet",children:[t?Object(g.jsx)(k,{slug:t}):Object(g.jsx)(C,{loading:b}),Object(g.jsx)(S,{})]})},T={wallets:[],setWallets:function(){},data:localStorage.getItem("yamlFile")||"# Test account:\n1AJ3AzFCusdG7dyCX2H1fsCVfmA5bPs1fe\n1MQN9MFhg7rLFrw9anbEwTBY6PatVydzDi\n\n# Account 2:\n13HwKWsEpcQy9PAbcpzDqARfm2wEG7Lnfs",setData:function(){},btcPrice:localStorage.getItem("btcPrice")?Number(localStorage.getItem("btcPrice")):0,setPrice:function(){}},A=c.a.createContext(T),W=function(){var e=Object(a.useState)(T.wallets),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(T.data),s=Object(i.a)(r,2),u=s[0],l=s[1],d=Object(a.useState)(T.btcPrice),b=Object(i.a)(d,2),j=b[0],f=b[1];return Object(g.jsxs)(A.Provider,{value:{wallets:n,setWallets:c,data:u,setData:l,btcPrice:j,setPrice:f},children:[Object(g.jsx)(o.b,{path:"/",component:D}),Object(g.jsx)(o.b,{path:"/:slug",component:D})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(W,{})}),document.getElementById("root")),F()},6:function(e,t,n){e.exports={container:"Details_container__bW1nG",close:"Details_close__g0cWG",header:"Details_header__zk2Lg",usdAmount:"Details_usdAmount__1OSyf",transactions:"Details_transactions__3F0OY",boxGreen:"Details_boxGreen__3YpuB",boxRed:"Details_boxRed__1DmDu"}},7:function(e,t,n){e.exports={container:"Viewer_container__3i4A8",header:"Viewer_header__34LO6",wallets:"Viewer_wallets__1YNdL","box-container":"Viewer_box-container__2zl5a",box:"Viewer_box__3pcwy","edit-btn":"Viewer_edit-btn__252hw",spinner:"Viewer_spinner__1sJyZ",spin:"Viewer_spin__24yXW"}},9:function(e,t,n){e.exports={container:"Editor_container__36r4Q",editor:"Editor_editor__2aEyo","save-btn":"Editor_save-btn__3xfZQ","expand-btn":"Editor_expand-btn__3d1wt"}}},[[24,1,2]]]);
//# sourceMappingURL=main.bedaeaac.chunk.js.map